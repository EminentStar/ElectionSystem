<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>jQuery UI Accordion - Collapse content</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<jsp:include page="/WEB-INF/view/com/meta.jsp" />
	<jsp:include page="/WEB-INF/view/com/favicon.jsp" />
	<jsp:include page="/WEB-INF/view/com/css.jsp" />
	<jsp:include page="/WEB-INF/view/com/script.jsp" />

	<script src="http://code.jquery.com/jquery-2.0.3.js"></script>
	<script src="<spring:url value="/js/jquery/jquery-1.5.min.js"/> "></script>
	<link rel="stylesheet" href="<spring:url value="/css/pledgecheck.css"/>"/>
	
	  <script type="text/javascript">
	$(function() {
	
		//var pledgeCnt = ${pledgeCnt};
		search();
		
		$("#modify").bind("click",function(){
			alert("1");
		});
	});
/* <div class="pledge" id="pledge">  
  		<div class="pledgeTitle">
  	 	 	<p width="780px" style="word-break:break-all">공약1</p> 이미지도 넣어야됨 체크유무
    	</div>
   		<div class="pledgeContent">
    		<p  style="width:780px; word-break:break-all"><font style="font-weight: bold; font-size:large;">공약내용</font></p>
     		<p  style="width:780px; word-break:break-all">안녕</p>
    	</div>
  	</div>
  	*/
	function search(){
		$.get("<spring:url value="/pledge/pledgechecklist"/>"
			,function(result){
			$("#wrap").html("");
			$(result.electedPledgeList).each(function(index,electedPledge){
				console.log(electedPledge);
				var $divPledge = $("<div class='pledge' id='pledge'>");
				
				var $divPledgeTitle = $("<div class='pledgeTitle' id='pledgeTitle'>");
				$divPledgeTitle.append(
						"<p id='pledge_title' style='word-break:break-all; width='780px;'>"+electedPledge.pledge_title+"</p>");
				 if(electedPledge.performance_check==0){
					$("#pledge_title").append("<img src=\"<spring:url value='/img/not.png'/>\"/>");
				}else{ //When single quotation is located in double quotation, Don't attached back slash. 
					$("#pledge_title").append("<img src=\"<spring:url value='/img/ok.png'/>\"/>");
				} 
				
				var $divContent = $("<div class='pledgeContent'>");
				$divContent = $("<div class='pledgeContent'>");
				$pTitle = $("<p id='pledge_contents' style='width:780px; word-break:break-all'>");
				$pTitle.append("<font style='font-weight: bold; font-size:large;'>"+electedPledge.pledge_contents+"</font>");
				$pContent = $("<p id='performance_contents' style='width:780px; word-break:break-all'>");
				$pContent.append(electedPledge.performance_contents);
				$p.append(electedPledge.pledge_contents);
				$divPledge.append($divPledgeTitle);
				$divPledge.append($divContent);
				$("#wrap").append($divPledge);				
			});
		});
	}
	</script>
	<script type="text/ecmascript">
		$(document).ready(function(){
			$(".pledgeContent").hide();
			$(".pledge").toggle(openAccordion, closeAccordion);
		});
		
		function openAccordion()
		{
			$(".pledgeContent", this).show("slow");
		}
		
		function closeAccordion()
		{
			$(".pledgeContent", this).hide("slow");
		}
	</script>
</head>
<body>
<jsp:include page="/WEB-INF/view/top.jsp" />
<br/>
<br/>
<br/>
<br/>
<br/>
<form name="modiform">
	<input type="hidden" name="pledge_id" id="pledge_id"/>
	<input type="hidden" name="pledge_title" id="pledge_title"/>
	<input type="hidden" name="pledge_contents" id="pledge_contents"/>
	<input type="hidden" name="performance_check" id="performance_check"/>
	<input type="hidden" name="performance_contents" id="performance_contents" />
	<input type="hidden" name="fid" id="fid" />
</form>

<div class="wrap" id="wrap">
<!--공약제목과 공약내용 반복소스-->
<!--  
	var $divTitle = $("<div class='pledge'>");
	$divTitle.append("<p id='pledge_title' width='780px' style='word-break:break-all'>"+pledge_title+</p>);
	var $divContent = $("<div class='pledgeContent'>");
	$divContent = $("<div class='pledgeContent'>");
	$pTitle = $("<p id='pledge_contents' style='width:780px; word-break:break-all'>");
	$pTitle.append("<font style='font-weight: bold; font-size:large;'>"+pledge_contents+"</font>");
	$pContent = $("<p id='performance_contents' style="width:780px; word-break:break-all">");
	$pContent.append(performance_contents);
 -->
   <!--
   <div class="pledge" id="pledge">  
  	 <div class="pledgeTitle">
  	  <p width="780px" style="word-break:break-all">공약1</p> 이미지도 넣어야됨 체크유무
    </div>
    <div class="pledgeContent">
      <p  style="width:780px; word-break:break-all"><font style="font-weight: bold; font-size:large;">공약내용</font></p>
      <p  style="width:780px; word-break:break-all">안녕</p>
    </div>
  </div> -->
</div>

<div align="right" style="float:left; width:100%">
	<input type="submit" name="modify" id="modify" value="<spring:message code="label.update"/>" />
</div>
</body>
</html>
